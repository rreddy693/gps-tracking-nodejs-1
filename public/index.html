<!DOCTYPE html>
<html>
<head>
  <title>GPS Tracking</title>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <script type="text/javascript" src="bower/moment/moment.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
</head>
<body ng-app="app">
	<div ng-controller="main">

    <div class="container">

      <h1>Hello!</h1>
      <p>Welcome to NodeJS</p>	

      <div ng-repeat="(deviceId, device) in devices">
       <p>{{device.deviceId}}</p>
       <strong>all location</strong>
       <div class="row">
        <div class="col-md-6">
          <ul>
            <li ng-repeat="l in device.locations">{{l.time.toLocaleString()}} [satellites: {{l.gpsSatellites}}] - <a ng-href="{{getMapLink(l)}}">open map</a></li>
          </ul>    
        </div>  
        <div class="col-md-6">
          <ul>
            <li ng-repeat="(key, value) in device.status">{{key}} - {{value}}</li>
          </ul>
        </div>
      </div>
      
      <p><strong>last checkin: {{_.last(device.locations).time}}</strong></p>
      <iframe width="100%" height="400" ng-src="{{getIFrameLink(_.last(device.locations))}}"></iframe>
    </div>
  </div>
</div>
<script type="text/javascript" src="/javascripts/angular.js"></script>
</body>
</html>